<view class="order-detail-container"><view class="{{['status-card','animate__animated','animate__fadeIn',(orderDetail.shippingStatus===0)?'status-wait-pick':'',(orderDetail.shippingStatus===1)?'status-picked':'',(orderDetail.shippingStatus===2)?'status-shipping':'',(orderDetail.shippingStatus===3)?'status-delivered':'',(orderDetail.shippingStatus===6)?'status-exception':'',(orderDetail.shippingStatus===10)?'status-canceled':'']}}"><view class="status-icon"><uni-icons vue-id="5fa31f36-1" type="{{statusIcon}}" size="28" color="#FFFFFF" bind:__l="__l"></uni-icons></view><view class="status-content"><view class="status-header"><text class="status-text">{{statusText}}</text><block wx:if="{{payMethodText}}"><view class="payment-container"><uni-icons vue-id="5fa31f36-2" type="wallet" size="16" color="#FF6B01" bind:__l="__l"></uni-icons><text class="payment-method">{{payMethodText}}</text></view></block></view><text class="status-desc">{{statusDesc}}</text><block wx:if="{{showCountdown&&countdownDisplay}}"><view class="countdown-wrapper"><uni-icons vue-id="5fa31f36-3" type="countdown" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text class="countdown-text">{{"剩余支付时间: "+countdownDisplay}}</text></view></block></view></view><view class="info-card animate__animated animate__fadeIn" style="animation-delay:0.1s;"><view class="card-header"><text class="header-title">订单信息</text></view><view class="card-body"><view class="info-item"><text class="label">订单ID</text><text class="value">{{orderDetail.orderId||'暂无'}}</text></view><view class="info-item"><text class="label">订单编号</text><view class="value-group"><text class="value order-no">{{orderDetail.orderNo||'暂无'}}</text><button data-event-opts="{{[['tap',[['copyOrderNo',['$event']]]]]}}" class="copy-btn" bindtap="__e">复制</button></view></view><view class="info-item"><text class="label">运单号</text><text class="value">{{orderDetail.deliveryId||'暂无'}}</text></view><view class="info-item"><text class="label">用户ID</text><text class="value">{{orderDetail.userId||'暂无'}}</text></view><view class="info-item"><text class="label">下单时间</text><text class="value">{{orderDetail.createTime||'暂无'}}</text></view><view class="info-item"><text class="label">更新时间</text><text class="value">{{orderDetail.updateTime||'暂无'}}</text></view><view class="info-item"><text class="label">删除状态</text><text class="value">{{orderDetail.isDelete===1?'已删除':'正常'}}</text></view></view></view><view class="info-card animate__animated animate__fadeIn" style="animation-delay:0.2s;"><view class="card-header"><text class="header-title">快递信息</text></view><view class="card-body"><view class="express-card"><view class="express-logo"><image src="{{expressLogo}}" mode="aspectFit"></image></view><view class="express-info"><text class="express-name">{{expressName}}</text><text class="express-no">{{orderDetail.deliveryId||'暂无运单号'}}</text></view></view><view class="info-item" style="margin-top:20rpx;"><text class="label">快递类型</text><text class="value">{{orderDetail.typeId||'普通快递'}}</text></view><view class="info-item"><text class="label">快递公司码</text><text class="value">{{orderDetail.expressCode||'暂无'}}</text></view><view class="info-item"><text class="label">运送状态</text><text class="value">{{$root.m0}}</text></view></view></view><view class="info-card animate__animated animate__fadeIn" style="animation-delay:0.25s;"><view class="card-header"><text class="header-title">时间安排</text></view><view class="card-body"><view class="info-item"><text class="label">取件开始</text><text class="value">{{orderDetail.pickUpStartTime||'暂无'}}</text></view><view class="info-item"><text class="label">取件结束</text><text class="value">{{orderDetail.pickUpEndTime||'暂无'}}</text></view><view class="info-item"><text class="label">发货时间</text><text class="value">{{orderDetail.shippingTime||'暂无'}}</text></view><view class="info-item"><text class="label">收货时间</text><text class="value">{{orderDetail.receivingTime||'暂无'}}</text></view></view></view><view class="info-card animate__animated animate__fadeIn" style="animation-delay:0.3s;"><view class="card-header"><text class="header-title">地址信息</text></view><view class="card-body"><view class="shipping-route"><view class="address-card"><view class="address-type sender">寄</view><view class="address-content"><view class="address-user"><text class="user-name">{{orderDetail.senderName||'暂无姓名'}}</text><text class="user-phone">{{senderPhoneFormatted||'暂无号码'}}</text></view><text class="address-text">{{''+(orderDetail.senderProvince||'')+"\n\t\t\t\t\t\t\t\t"+(orderDetail.senderCity||'')+"\n\t\t\t\t\t\t\t\t"+(orderDetail.senderDistrict||'')+"\n\t\t\t\t\t\t\t\t"+(orderDetail.senderDetailAddress||'暂无详细地址')+''}}</text></view></view><view class="route-line"><view class="route-dot start"></view><view class="route-path"></view><view class="route-dot end"></view></view><view class="address-card"><view class="address-type receiver">收</view><view class="address-content"><view class="address-user"><text class="user-name">{{orderDetail.receiverName||'暂无姓名'}}</text><text class="user-phone">{{receiverPhoneFormatted||'暂无号码'}}</text></view><text class="address-text">{{''+(orderDetail.receiverProvince||'')+"\n\t\t\t\t\t\t\t\t"+(orderDetail.receiverCity||'')+"\n\t\t\t\t\t\t\t\t"+(orderDetail.receiverDistrict||'')+"\n\t\t\t\t\t\t\t\t"+(orderDetail.receiverDetailAddress||'暂无详细地址')+''}}</text></view></view></view></view></view><view class="info-card animate__animated animate__fadeIn" style="animation-delay:0.4s;"><view class="card-header"><text class="header-title">物品信息</text></view><view class="card-body"><view class="goods-item"><text class="label">预估重量</text><text class="value">{{(orderDetail.estimatedItemWeight||'0')+"kg"}}</text></view><view class="goods-item"><text class="label">实际重量</text><text class="value">{{orderDetail.actualWeight?orderDetail.actualWeight+'kg':'待取件'}}</text></view><block wx:if="{{$root.g0}}"><view class="goods-item"><text class="label">长</text><text class="value">{{$root.g1+"cm"}}</text></view></block><block wx:if="{{orderDetail.width}}"><view class="goods-item"><text class="label">宽</text><text class="value">{{orderDetail.width+"cm"}}</text></view></block><block wx:if="{{orderDetail.height}}"><view class="goods-item"><text class="label">高</text><text class="value">{{orderDetail.height+"cm"}}</text></view></block><block wx:if="{{orderDetail.remark}}"><view class="goods-item"><text class="label">备注信息</text><text class="value remark">{{orderDetail.remark}}</text></view></block></view></view><block wx:if="{{showWeightDifference}}"><view class="info-card animate__animated animate__fadeIn" style="animation-delay:0.45s;"><view class="card-header"><text class="header-title">重量差价</text><view class="{{['tag',isPriceDifferencePaid?'tag-success':'tag-warning']}}">{{''+(isPriceDifferencePaid?'已补差价':'待补差价')+''}}</view></view><view class="card-body"><view class="weight-compare"><view class="weight-item"><text class="weight-label">预估重量</text><text class="weight-value">{{(orderDetail.estimatedItemWeight||'0')+"kg"}}</text><text class="weight-calc">{{"(计费:\n\t\t\t\t\t\t\t"+$root.m1+"kg)"}}</text></view><view class="arrow-icon"><uni-icons vue-id="5fa31f36-4" type="arrow-right" size="20" color="#999" bind:__l="__l"></uni-icons></view><view class="weight-item actual"><text class="weight-label">实际重量</text><text class="weight-value">{{(orderDetail.actualWeight||'0')+"kg"}}</text><text class="weight-calc">{{"(计费: "+$root.m2+"kg)"}}</text></view></view><view class="price-divider"></view><view class="diff-info"><view class="diff-item"><text class="diff-label">重量差额</text><text class="diff-value">{{weightDifference+"kg"}}</text></view><view class="diff-item"><text class="diff-label">差价金额</text><text class="diff-value price">{{"¥"+(orderDetail.orderStatus===7?orderDetail.orderTotalPrice:orderDetail.orderPriceDifference||'0.00')}}</text></view><view class="diff-desc"><uni-icons vue-id="5fa31f36-5" type="info" size="14" color="#999" bind:__l="__l"></uni-icons><text>不足1kg按1kg计算，超过1kg部分向上取整</text></view></view></view></view></block><view class="info-card animate__animated animate__fadeIn" style="animation-delay:0.5s;"><view class="card-header"><text class="header-title">费用明细</text></view><view class="card-body"><view class="price-item"><text class="label">订单总价</text><text class="value">{{"¥"+(orderDetail.orderTotalPrice||'0.00')}}</text></view><block wx:if="{{orderDetail.insuranceFee}}"><view class="price-item"><text class="label">保价费用</text><text class="value">{{"¥"+orderDetail.insuranceFee}}</text></view></block><block wx:if="{{orderDetail.guaranteeValueAmount}}"><view class="price-item"><text class="label">保价金额</text><text class="value">{{"¥"+orderDetail.guaranteeValueAmount}}</text></view></block><block wx:if="{{orderDetail.commissionDeductionAmount}}"><view class="price-item"><text class="label">佣金抵扣</text><text class="value discount">{{"-¥"+orderDetail.commissionDeductionAmount}}</text></view></block><block wx:if="{{orderDetail.commissionDeductionAmount}}"><view class="price-item"><text class="label">抵扣后金额</text><text class="value">{{"¥"+(orderDetail.amountAfterCommissionDeduction||orderDetail.orderTotalPrice||'0.00')}}</text></view></block><block wx:if="{{orderDetail.orderPriceDifference}}"><view class="price-item"><text class="label">差价金额</text><text class="value">{{"¥"+(orderDetail.orderStatus===7?orderDetail.orderTotalPrice:orderDetail.orderPriceDifference)}}</text></view></block><block wx:if="{{orderDetail.orderPriceDifference&&orderDetail.orderPriceDifference!==0.00}}"><view class="price-item"><text class="label">差价支付</text><text class="value">{{orderDetail.isPriceDifferencePaid===1?'已支付':'未支付'}}</text></view></block><view class="price-divider"></view><view class="price-total"><text class="label">实付金额</text><text class="total-value">{{"¥"+actualPayAmount}}</text></view></view></view><view class="bottom-space"></view><view class="action-bar animate__animated animate__fadeInUp"><block wx:if="{{orderDetail.orderStatus===1}}"><button data-event-opts="{{[['tap',[['showCancelConfirm']]]]}}" class="action-btn cancel-btn" bindtap="__e"><uni-icons vue-id="5fa31f36-6" type="close" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>取消订单</text></button></block><block wx:if="{{$root.g2}}"><button data-event-opts="{{[['tap',[['goLogistics']]]]}}" class="action-btn logistics-btn" bindtap="__e"><uni-icons vue-id="5fa31f36-7" type="paperplane" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>查看物流</text></button></block><block wx:if="{{$root.g3}}"><button data-event-opts="{{[['tap',[['showDeleteConfirm']]]]}}" class="action-btn delete-btn" bindtap="__e"><uni-icons vue-id="5fa31f36-8" type="trash" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>删除订单</text></button></block><block wx:if="{{needToPay}}"><button data-event-opts="{{[['tap',[['payDifference',['$event']]]]]}}" class="action-btn pay-btn" bindtap="__e"><uni-icons vue-id="5fa31f36-9" type="wallet" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>{{"支付"+(orderDetail.orderStatus==7&&orderDetail.isPriceDifferencePaid==0?"全价":"差价")}}</text></button></block><block wx:else><block wx:if="{{orderDetail.orderStatus==7&&orderDetail.isPriceDifferencePaid==0}}"><button data-event-opts="{{[['tap',[['payAll',['$event']]]]]}}" class="action-btn pay-btn" bindtap="__e"><uni-icons vue-id="5fa31f36-10" type="wallet" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>支付全价</text></button></block></block></view></view>