<view class="apply-container"><view class="steps-indicator"><block wx:for="{{steps}}" wx:for-item="step" wx:for-index="index" wx:key="index"><view class="{{['step-item',(currentStep>=index)?'active':'',(currentStep>index)?'completed':'']}}"><view class="step-number"><block wx:if="{{currentStep<=index}}"><text>{{index+1}}</text></block><block wx:else><uni-icons vue-id="{{'28c50d8e-1-'+index}}" type="checkmarkempty" size="14" color="#FFFFFF" bind:__l="__l"></uni-icons></block></view><text class="step-title">{{step.title}}</text><block wx:if="{{index<$root.g0-1}}"><view class="step-line"></view></block></view></block></view><view class="steps-content-wrapper"><swiper class="steps-content" style="{{'height:'+(swiperHeight+'px')+';'}}" current="{{currentStep}}" disable-touch="{{true}}"><swiper-item><scroll-view class="step-scroll" scroll-y="{{true}}"><view class="step-container animate__animated animate__fadeIn"><view class="step-header"><text class="title">选择账户类型</text><text class="subtitle">请选择您的账户类型</text></view><view class="account-type-options"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="{{['account-option',(formData.accountType===0)?'active':'']}}" bindtap="__e"><view class="option-icon"><uni-icons vue-id="28c50d8e-2" type="shop" size="32" color="#FF6B01" bind:__l="__l"></uni-icons></view><view class="option-content"><text class="option-title">企业账户</text><text class="option-desc">适合公司、企业等组织</text></view><view class="option-check"><uni-icons vue-id="28c50d8e-3" type="{{formData.accountType===0?'checkbox-filled':'circle'}}" size="20" color="{{formData.accountType===0?'#FF6B01':'#CCCCCC'}}" bind:__l="__l"></uni-icons></view></view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['account-option',(formData.accountType===1)?'active':'']}}" bindtap="__e"><view class="option-icon"><uni-icons vue-id="28c50d8e-4" type="person" size="32" color="#FF6B01" bind:__l="__l"></uni-icons></view><view class="option-content"><text class="option-title">个人账户</text><text class="option-desc">适合个人、自由职业者</text></view><view class="option-check"><uni-icons vue-id="28c50d8e-5" type="{{formData.accountType===1?'checkbox-filled':'circle'}}" size="20" color="{{formData.accountType===1?'#FF6B01':'#CCCCCC'}}" bind:__l="__l"></uni-icons></view></view></view></view></scroll-view></swiper-item><swiper-item><scroll-view class="step-scroll" scroll-y="{{true}}"><view class="step-container animate__animated animate__fadeIn"><view class="step-header"><text class="title">填写基本信息</text><text class="subtitle">请填写您的联系信息</text></view><view class="form-group"><view class="form-item"><text class="label required">联系人</text><input class="input" type="text" placeholder="请输入联系人姓名" placeholder-style="color: #999999" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['formData']]]]]}}" value="{{formData.name}}" bindinput="__e"/></view><view class="form-item"><text class="label required">联系电话</text><input class="input" type="number" placeholder="请输入联系电话" placeholder-style="color: #999999" maxlength="11" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['formData']]]]]}}" value="{{formData.phone}}" bindinput="__e"/></view><view class="form-item"><text class="label required">联系地址</text><input class="input" type="text" placeholder="请输入联系地址" placeholder-style="color: #999999" data-event-opts="{{[['input',[['__set_model',['$0','address','$event',[]],['formData']]]]]}}" value="{{formData.address}}" bindinput="__e"/></view><view class="form-item"><text class="label required">电子邮箱</text><input class="input" type="text" placeholder="请输入电子邮箱" placeholder-style="color: #999999" data-event-opts="{{[['input',[['__set_model',['$0','email','$event',[]],['formData']]]]]}}" value="{{formData.email}}" bindinput="__e"/></view></view></view></scroll-view></swiper-item><swiper-item><scroll-view class="step-scroll" scroll-y="{{true}}"><view class="step-container animate__animated animate__fadeIn"><view class="step-header"><text class="title">填写结算信息</text><text class="subtitle">请设置您的结算周期和金额</text></view><view class="form-group"><view class="form-item"><text class="label required">结算周期</text><picker mode="selector" range="{{cycleOptions}}" value="{{formData.settlementCycle}}" data-event-opts="{{[['change',[['onCycleChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value"><text>{{cycleOptions[formData.settlementCycle]||'请选择结算周期'}}</text><uni-icons vue-id="28c50d8e-6" type="arrowdown" size="14" color="#999999" bind:__l="__l"></uni-icons></view></picker></view><view class="form-item"><text class="label required">最低寄件量</text><view class="input-with-unit"><input class="input" type="digit" placeholder="请输入每月最低寄件量" placeholder-style="color: #999999" data-event-opts="{{[['input',[['__set_model',['$0','minimumAmount','$event',[]],['formData']]]]]}}" value="{{formData.minimumAmount}}" bindinput="__e"/><text class="unit">元/月</text></view></view><view class="form-item"><text class="label required">发票要求</text><picker mode="selector" range="{{invoiceOptions}}" value="{{formData.invoiceRequirement}}" data-event-opts="{{[['change',[['onInvoiceChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value"><text>{{invoiceOptions[formData.invoiceRequirement]||'请选择发票类型'}}</text><uni-icons vue-id="28c50d8e-7" type="arrowdown" size="14" color="#999999" bind:__l="__l"></uni-icons></view></picker></view><view class="form-item"><text class="label">特殊要求</text><textarea class="textarea" placeholder="请输入特殊要求（选填）" placeholder-style="color: #999999" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['formData']]]]]}}" value="{{formData.remark}}" bindinput="__e"></textarea></view></view></view></scroll-view></swiper-item><swiper-item><scroll-view class="step-scroll" scroll-y="{{true}}"><view class="step-container animate__animated animate__fadeIn"><view class="step-header"><text class="title">上传证件信息</text><text class="subtitle">请上传清晰的证件照片</text></view><view class="upload-group"><view class="form-item"><text class="label">身份证人像面</text><view data-event-opts="{{[['tap',[['uploadImage',['idCardPortraitPhoto']]]]]}}" class="upload-box" bindtap="__e"><block wx:if="{{formData.idCardPortraitPhoto}}"><image class="preview-image" src="{{$root.m0}}" mode="aspectFill"></image></block><block wx:else><view class="upload-placeholder"><uni-icons vue-id="28c50d8e-8" type="camera-filled" size="40" color="#CCCCCC" bind:__l="__l"></uni-icons><text>点击上传身份证人像面</text></view></block><block wx:if="{{formData.idCardPortraitPhoto}}"><view class="upload-overlay"><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="overlay-btn" catchtap="__e"><uni-icons vue-id="28c50d8e-9" type="eye" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>预览</text></view><view data-event-opts="{{[['tap',[['uploadImage',['idCardPortraitPhoto']]]]]}}" class="overlay-btn" catchtap="__e"><uni-icons vue-id="28c50d8e-10" type="upload" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>重新上传</text></view></view></block></view><text class="upload-tips">请上传清晰的身份证人像面照片</text></view><view class="form-item"><text class="label">身份证国徽面</text><view data-event-opts="{{[['tap',[['uploadImage',['idCardEmblemPhoto']]]]]}}" class="upload-box" bindtap="__e"><block wx:if="{{formData.idCardEmblemPhoto}}"><image class="preview-image" src="{{$root.m1}}" mode="aspectFill"></image></block><block wx:else><view class="upload-placeholder"><uni-icons vue-id="28c50d8e-11" type="camera-filled" size="40" color="#CCCCCC" bind:__l="__l"></uni-icons><text>点击上传身份证国徽面</text></view></block><block wx:if="{{formData.idCardEmblemPhoto}}"><view class="upload-overlay"><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="overlay-btn" catchtap="__e"><uni-icons vue-id="28c50d8e-12" type="eye" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>预览</text></view><view data-event-opts="{{[['tap',[['uploadImage',['idCardEmblemPhoto']]]]]}}" class="overlay-btn" catchtap="__e"><uni-icons vue-id="28c50d8e-13" type="upload" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>重新上传</text></view></view></block></view><text class="upload-tips">请上传清晰的身份证国徽面照片</text></view><block wx:if="{{formData.accountType===0}}"><view class="form-item"><text class="label">营业执照</text><view data-event-opts="{{[['tap',[['uploadImage',['businessLicense']]]]]}}" class="upload-box" bindtap="__e"><block wx:if="{{formData.businessLicense}}"><image class="preview-image" src="{{$root.m2}}" mode="aspectFill"></image></block><block wx:else><view class="upload-placeholder"><uni-icons vue-id="28c50d8e-14" type="camera-filled" size="40" color="#CCCCCC" bind:__l="__l"></uni-icons><text>点击上传营业执照</text></view></block><block wx:if="{{formData.businessLicense}}"><view class="upload-overlay"><view data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="overlay-btn" catchtap="__e"><uni-icons vue-id="28c50d8e-15" type="eye" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>预览</text></view><view data-event-opts="{{[['tap',[['uploadImage',['businessLicense']]]]]}}" class="overlay-btn" catchtap="__e"><uni-icons vue-id="28c50d8e-16" type="upload" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>重新上传</text></view></view></block></view><text class="upload-tips">请上传清晰的营业执照照片</text></view></block></view></view></scroll-view></swiper-item><swiper-item><scroll-view class="step-scroll" scroll-y="{{true}}"><view class="step-container animate__animated animate__fadeIn"><view class="step-header"><text class="title">确认信息</text><text class="subtitle">请确认您的申请信息</text></view><view class="confirm-card"><view class="card-section"><view class="section-title"><uni-icons vue-id="28c50d8e-17" type="person" size="18" color="#FF6B01" bind:__l="__l"></uni-icons><text>基本信息</text></view><view class="info-grid"><view class="info-item"><text class="label">账户类型</text><text class="value highlight">{{formData.accountType===0?'企业账户':'个人账户'}}</text></view><view class="info-item"><text class="label">联系人</text><text class="value">{{formData.name}}</text></view><view class="info-item"><text class="label">联系电话</text><text class="value">{{formData.phone}}</text></view><view class="info-item full-width"><text class="label">联系地址</text><text class="value">{{formData.address}}</text></view><view class="info-item full-width"><text class="label">电子邮箱</text><text class="value">{{formData.email}}</text></view></view></view><view class="card-section"><view class="section-title"><uni-icons vue-id="28c50d8e-18" type="wallet" size="18" color="#FF6B01" bind:__l="__l"></uni-icons><text>结算信息</text></view><view class="info-grid"><view class="info-item"><text class="label">最低寄件量</text><text class="value highlight">{{formData.minimumAmount+" 元/月"}}</text></view><view class="info-item"><text class="label">结算周期</text><text class="value">{{cycleOptions[formData.settlementCycle]}}</text></view><view class="info-item full-width"><text class="label">发票要求</text><text class="value">{{invoiceOptions[formData.invoiceRequirement]}}</text></view><block wx:if="{{formData.remark}}"><view class="info-item full-width"><text class="label">特殊要求</text><text class="value">{{formData.remark}}</text></view></block></view></view><view class="card-section"><view class="section-title"><uni-icons vue-id="28c50d8e-19" type="paperplane" size="18" color="#FF6B01" bind:__l="__l"></uni-icons><text>证件信息</text></view><view class="document-preview"><block wx:if="{{formData.idCardPortraitPhoto}}"><view class="document-item"><image src="{{$root.m3}}" mode="aspectFit"></image><text>身份证人像面</text></view></block><block wx:if="{{formData.idCardEmblemPhoto}}"><view class="document-item"><image src="{{$root.m4}}" mode="aspectFit"></image><text>身份证国徽面</text></view></block><block wx:if="{{formData.businessLicense&&formData.accountType===0}}"><view class="document-item"><image src="{{$root.m5}}" mode="aspectFit"></image><text>营业执照</text></view></block></view></view></view><view class="agreement-box"><view data-event-opts="{{[['tap',[['toggleAgreement',['$event']]]]]}}" class="checkbox" bindtap="__e"><uni-icons vue-id="28c50d8e-20" type="{{agreed?'checkbox-filled':'circle'}}" size="18" color="{{agreed?'#FF6B01':'#CCCCCC'}}" bind:__l="__l"></uni-icons></view><text data-event-opts="{{[['tap',[['goToMonthly',['$event']]]]]}}" class="agreement-text" bindtap="__e">我已阅读并同意《月结服务协议》</text></view></view></scroll-view></swiper-item></swiper></view><view class="bottom-actions"><block wx:if="{{currentStep>0}}"><button data-event-opts="{{[['tap',[['prevStep',['$event']]]]]}}" class="prev-btn" bindtap="__e"><uni-icons vue-id="28c50d8e-21" type="left" size="14" color="#666666" bind:__l="__l"></uni-icons><text>上一步</text></button></block><block wx:if="{{currentStep<$root.g1-1}}"><button class="next-btn" disabled="{{!canGoNext}}" data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" bindtap="__e"><text>下一步</text><uni-icons vue-id="28c50d8e-22" type="right" size="14" color="#FFFFFF" bind:__l="__l"></uni-icons></button></block><block wx:if="{{currentStep===$root.g2-1}}"><button data-event-opts="{{[['tap',[['submitApply',['$event']]]]]}}" class="submit-btn" bindtap="__e"><text>{{submitting?'提交中...':'提交申请'}}</text></button></block></view></view>