<view class="send-container"><view class="{{['nav-bar',(isIPhoneX)?'ios-nav':'']}}"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="nav-back ripple-effect" bindtap="__e"><uni-icons vue-id="2932b45c-1" type="back" size="22" color="#333333" bind:__l="__l"></uni-icons></view><text class="nav-title">{{isEdit?'编辑订单':'新增订单'}}</text><view class="nav-right"><text data-event-opts="{{[['tap',[['saveOrder',['$event']]]]]}}" class="save-text" bindtap="__e">保存</text></view></view><view class="main-content"><scroll-view class="content-scroll" style="{{'height:'+('calc(100vh - '+(isIPhoneX?'168rpx':'118rpx')+')')+';'}}" scroll-y="{{true}}" scroll-top="{{scrollTop}}"><view class="content-area"><view class="form-card animate-slide-in" style="animation-delay:0s;"><view class="card-header"><view class="title-wrapper"><view class="icon-wrapper sender"><uni-icons vue-id="2932b45c-2" type="paperplane" size="20" color="#FFFFFF" bind:__l="__l"></uni-icons></view><text class="card-title">寄件人信息</text></view></view><view class="form-content"><block wx:if="{{!formData.senderName}}"><view data-event-opts="{{[['tap',[['selectAddress',['sender']]]]]}}" class="address-empty-card ripple pulse-animation" bindtap="__e"><uni-icons vue-id="2932b45c-3" type="plusempty" size="24" color="#FF6B01" bind:__l="__l"></uni-icons><text>从地址簿选择寄件人</text></view></block><block wx:else><view class="selected-address-card"><view class="address-info"><view class="address-person-info"><text class="address-name">{{formData.senderName}}</text><text class="address-phone">{{$root.m0}}</text></view><text class="address-detail">{{formData.senderProvince+" "+formData.senderCity+"\n\t\t\t\t\t\t\t\t\t"+formData.senderDistrict+" "+formData.senderDetailAddress}}</text></view><view class="address-actions"><view data-event-opts="{{[['tap',[['selectAddress',['sender']]]]]}}" class="address-action-btn ripple" bindtap="__e"><uni-icons vue-id="2932b45c-4" type="loop" size="16" color="#FF6B01" bind:__l="__l"></uni-icons><text>更换</text></view></view></view></block></view></view><view class="form-card animate-slide-in" style="animation-delay:0.1s;"><view class="card-header"><view class="title-wrapper"><view class="icon-wrapper receiver"><uni-icons vue-id="2932b45c-5" type="map-pin-ellipse" size="20" color="#FFFFFF" bind:__l="__l"></uni-icons></view><text class="card-title">收件人信息</text></view></view><view class="form-content"><block wx:if="{{!formData.receiverName}}"><view data-event-opts="{{[['tap',[['selectAddress',['receiver']]]]]}}" class="address-empty-card ripple pulse-animation" bindtap="__e"><uni-icons vue-id="2932b45c-6" type="plusempty" size="24" color="#FF6B01" bind:__l="__l"></uni-icons><text>从地址簿选择收件人</text></view></block><block wx:else><view class="selected-address-card"><view class="address-info"><view class="address-person-info"><text class="address-name">{{formData.receiverName}}</text><text class="address-phone">{{$root.m1}}</text></view><text class="address-detail">{{formData.receiverProvince+"\n\t\t\t\t\t\t\t\t\t"+formData.receiverCity+" "+formData.receiverDistrict+"\n\t\t\t\t\t\t\t\t\t"+formData.receiverDetailAddress}}</text></view><view class="address-actions"><view data-event-opts="{{[['tap',[['selectAddress',['receiver']]]]]}}" class="address-action-btn ripple" bindtap="__e"><uni-icons vue-id="2932b45c-7" type="loop" size="16" color="#FF6B01" bind:__l="__l"></uni-icons><text>更换</text></view></view></view></block></view></view><view class="form-card animate-slide-in" style="animation-delay:0.2s;"><view class="card-header"><view class="title-wrapper"><view class="icon-wrapper package"><uni-icons vue-id="2932b45c-8" type="package" size="20" color="#FFFFFF" bind:__l="__l"></uni-icons></view><text class="card-title">物品信息</text></view></view><view class="form-content"><view class="input-row"><view class="legal-notice"><text>请如实填写物品信息，由于虚假信息造成的法律责任，或者快递拦截、退件费用都将由寄件人承担！</text></view><text class="label">物品类型</text><view class="dropdown-wrapper"><view class="input-wrapper"><input class="input" type="text" placeholder="请选择或输入物品类型" data-event-opts="{{[['input',[['__set_model',['','expressTypeQuery','$event',[]]],['onExpressTypeSearch',['$event']]]],['focus',[['e0',['$event']]]],['blur',[['onTypeInputBlur',['$event']]]]]}}" value="{{expressTypeQuery}}" bindinput="__e" bindfocus="__e" bindblur="__e"/><block wx:if="{{expressTypeSearchLoading}}"><view class="search-loading"><view class="loading-dot"></view></view></block><block wx:else><uni-icons class="search-icon" vue-id="2932b45c-9" type="search" size="16" color="#999" bind:__l="__l"></uni-icons></block></view><block wx:if="{{showTypeDropdown}}"><view class="type-dropdown"><block wx:if="{{$root.g0}}"><view class="type-debug"><text>未找到相关物品类型</text><block wx:if="{{expressTypeQuery}}"><text class="debug-query">{{"搜索词:\n\t\t\t\t\t\t\t\t\t\t\t\""+expressTypeQuery+"\""}}</text></block></view></block><block wx:for="{{filteredExpressTypes}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectExpressType',['$0'],[[['filteredExpressTypes','',index]]]]]]]}}" class="type-item ripple" catchtap="__e"><text>{{item.typeName}}</text></view></block></view></block></view></view><view class="input-row"><text class="label">物品重量 (kg)</text><input class="input weight-input" type="digit" placeholder="请输入物品重量" maxlength="5" data-event-opts="{{[['input',[['__set_model',['$0','estimatedItemWeight','$event',[]],['formData']],['validateWeightInput',['$event']]]]]}}" value="{{formData.estimatedItemWeight}}" bindinput="__e"/><text class="unit-text">kg</text></view><view class="input-row"><text class="label">物品长度 (cm)</text><input class="input length-input" type="digit" placeholder="请输入物品长度" maxlength="5" data-event-opts="{{[['input',[['__set_model',['$0','length','$event',[]],['formData']],['validateLengthInput',['$event']]]]]}}" value="{{$root.g2}}" bindinput="__e"/><text class="unit-text">cm</text></view><view class="input-row"><text class="label">物品宽度 (cm)</text><input class="input width-input" type="digit" placeholder="请输入物品宽度" maxlength="5" data-event-opts="{{[['input',[['__set_model',['$0','width','$event',[]],['formData']],['validateWidthInput',['$event']]]]]}}" value="{{formData.width}}" bindinput="__e"/><text class="unit-text">cm</text></view><view class="input-row"><text class="label">物品高度 (cm)</text><input class="input height-input" type="digit" placeholder="请输入物品高度" maxlength="5" data-event-opts="{{[['input',[['__set_model',['$0','height','$event',[]],['formData']],['validateHeightInput',['$event']]]]]}}" value="{{formData.height}}" bindinput="__e"/><text class="unit-text">cm</text></view><view class="input-row"><text class="label">上门备注</text><input class="input" type="text" placeholder="如特殊要求请备注说明" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['formData']]]]]}}" value="{{formData.remark}}" bindinput="__e"/></view></view></view><view class="safe-area-bottom"></view></view></scroll-view></view><view class="bottom-bar" style="{{'padding-bottom:'+(isIPhoneX?'34rpx':'0')+';'}}"><view class="bottom-btn-wrapper"><button data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="cancel-btn ripple" bindtap="__e">取消</button><button class="{{['submit-btn','ripple',(!isFormValid)?'disabled':'']}}" disabled="{{!isFormValid}}" data-event-opts="{{[['tap',[['saveOrder',['$event']]]]]}}" bindtap="__e">保存订单</button></view></view></view>